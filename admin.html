<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Quiz Câmara dos Deputados</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5f3f;
            --primary-light: #278f5f;
            --accent: #d4af37;
            --background: #1e2838;
            --card-bg: #2a3f54;
            --text-light: #ecf0f1;
            --danger: #e74c3c;
            --success: #27ae60;
        }

        body {
            margin: 0;
            padding: 20px;
            background-color: var(--background);
            font-family: 'Poppins', sans-serif;
            color: var(--text-light);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 20px;
        }

        h1 {
            color: var(--accent);
            margin: 0;
            font-size: 24px;
        }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
        }

        .btn-outline:hover {
            background-color: var(--accent);
            color: var(--background);
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            font-size: 18px;
            color: var(--accent);
            margin-bottom: 15px;
            font-weight: 600;
        }

        textarea {
            width: 100%;
            height: 150px;
            background-color: #17202d;
            border: 1px solid #34495e;
            color: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            resize: vertical;
            margin-bottom: 10px;
            box-sizing: border-box;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .quiz-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .quiz-item {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quiz-item.active {
            border: 1px solid var(--success);
            background-color: rgba(39, 174, 96, 0.1);
        }

        .quiz-info h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .quiz-info p {
            margin: 0;
            font-size: 12px;
            color: #95a5a6;
        }

        .quiz-actions {
            display: flex;
            gap: 10px;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }

        .alert {
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }

        .alert-success {
            background-color: rgba(39, 174, 96, 0.2);
            color: #2ecc71;
            border: 1px solid #27ae60;
        }

        .alert-error {
            background-color: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
            border: 1px solid #c0392b;
        }

        #import-section {
            display: none;
            /* Initially hidden, toggled by button */
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>Painel Administrativo</h1>
            <a href="index.html" class="btn btn-outline" id="btn-back">Voltar ao Jogo</a>
        </header>

        <div id="message-area" class="alert"></div>

        <!-- Active Quiz Display -->
        <div class="card">
            <div class="section-title">Quiz Selecionado Atualmente</div>
            <div id="current-quiz-display">
                <p>Carregando...</p>
            </div>
        </div>

        <!-- Actions -->
        <div style="margin-bottom: 20px; display: flex; gap: 10px;">
            <button class="btn" onclick="toggleImport()">+ Importar Novo Quiz (JSON)</button>
            <button class="btn btn-danger" onclick="resetToDefault()">Restaurar Original</button>
        </div>

        <!-- Import Section -->
        <div id="import-section" class="card">
            <div class="section-title">Importar JSON</div>
            <p style="font-size: 13px; color: #bdc3c7; margin-bottom: 10px;">
                Cole o JSON abaixo. Formato esperado: <code>{ "title": "...", "questions": [...] }</code>
            </p>
            <textarea id="json-input" placeholder='{
  "title": "Meu Quiz Personalizado",
  "questions": [
    {
      "enunciado": "Pergunta 1...",
      "alternativas": ["A", "B", "C", "D"],
      "correta": 0,
      "explicacao": "Explicação..."
    }
  ]
}'></textarea>
            <button class="btn" onclick="processImport()">Salvar Quiz</button>
            <button class="btn btn-outline" onclick="toggleImport()">Cancelar</button>
        </div>

        <!-- My Quizzes List -->
        <div class="card">
            <div class="section-title">Meus Quizzes Salvos</div>
            <ul id="quiz-list-container" class="quiz-list">
                <!-- Items injected by JS -->
                <li style="text-align: center; color: #7f8c8d; padding: 20px;">Nenhum quiz salvo ainda.</li>
            </ul>
        </div>

        <div style="margin-top: 40px; border-top: 1px solid #34495e; padding-top: 20px;">
            <div class="section-title">Prompt para Gerar Questões na IA</div>
            <p style="font-size: 13px; color: #95a5a6; line-height: 1.5;">
                Para criar novos quizzes, copie o prompt abaixo e peça para o ChatGPT ou Gemini gerar as questões para
                você.
                Depois, basta copiar o JSON gerado e colar no botão "Importar Novo Quiz" acima.
            </p>
            <div
                style="background: #10151d; padding: 15px; border-radius: 4px; font-size: 12px; color: #ecf0f1; font-family: monospace; position: relative;">
                <p style="margin: 0; white-space: pre-wrap;">Gere um arquivo JSON com 10 questões de múltipla escolha
                    sobre [TEMA DESEJADO].
                    O JSON deve seguir estritamente este formato, sem markdown ao redor:
                    {
                    "title": "Título do Quiz",
                    "questions": [
                    {
                    "enunciado": "Texto da pergunta?",
                    "alternativas": ["Opção A", "Opção B", "Opção C", "Opção D"],
                    "correta": 0, // Índice da correta (0 a 3)
                    "explicacao": "Explicação breve da resposta."
                    }
                    ]
                    }</p>
                <button class="btn btn-sm btn-outline" style="position: absolute; top: 10px; right: 10px;"
                    onclick="copyPrompt()">Copiar Prompt</button>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>

</html>